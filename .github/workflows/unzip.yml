name: Auto Unzip All Zips
on:
  push:
    paths:
      - '*.zip'

permissions:
  contents: write

jobs:
  unzip:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Unzip all zip files (auto-overwrite)
        run: |
          for zipfile in *.zip; do
            if [ -f "$zipfile" ]; then
              echo "解压并覆盖文件: $zipfile"
              # 添加 -o 参数：强制覆盖现有文件，不提示
              unzip -o -q "$zipfile" -d ./  
            fi
          done

      - name: Commit and push
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "Auto unzip (overwrite existing files)"
          file_pattern: "*"
